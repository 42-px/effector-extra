{"version":3,"file":"effector-extra.cjs.js","sources":["../src/attach-wrapper.ts"],"sourcesContent":["import {\n    Effect, attach, createEffect,\n} from \"effector\"\n\nexport function attachWrapper<AttachP, AttachD, AttachF, P, D, F>({\n    effect,\n    mapParams,\n    mapResult,\n    mapError,\n}: {\n  effect: Effect<P, D, F>\n  mapParams: (params: AttachP) => P\n  mapResult: ({ params, result }: { params: P; result: D }) => AttachD\n  mapError: ({ params, error }: { params: P; error: F }) => AttachF\n}): Effect<AttachP, AttachD, AttachF>\nexport function attachWrapper<AttachP, AttachD, P, D, F>({\n    effect,\n    mapParams,\n    mapResult,\n}: {\n  effect: Effect<P, D, F>\n  mapParams: (params: AttachP) => P\n  mapResult: ({ params, result }: { params: P; result: D }) => AttachD\n}): Effect<AttachP, AttachD, F>\nexport function attachWrapper<AttachP, AttachF, P, D, F>({\n    effect,\n    mapParams,\n    mapError,\n}: {\n  effect: Effect<P, D, F>\n  mapParams: (params: AttachP) => P\n  mapError: ({ params, error }: { params: P; error: F }) => AttachF\n}): Effect<AttachP, D, AttachF>\nexport function attachWrapper(args: any): any {\n    return attach({\n        mapParams: (originalParams) => args.mapParams(originalParams),\n        effect: createEffect({\n            handler: (params: any) => {\n                let promise: any = args.effect(params)\n                if (args.mapResult) {\n                    promise = promise.then(\n                        (result: any) => args.mapResult({ params, result })\n                    )\n                }\n                if (args.mapError) {\n                    promise = promise.catch((error: any) => {\n                        throw args.mapError({ params, error })\n                    })\n                }\n                return promise\n            },\n        }),\n    })\n}\n"],"names":["args","attach","mapParams","originalParams","effect","createEffect","handler","params","promise","mapResult","then","result","mapError","catch","error"],"mappings":"6HAiC8BA,GAC1B,OAAOC,SAAO,CACVC,UAAYC,GAAmBH,EAAKE,UAAUC,GAC9CC,OAAQC,eAAa,CACjBC,QAAUC,IACN,IAAIC,EAAeR,EAAKI,OAAOG,GAW/B,OAVIP,EAAKS,YACLD,EAAUA,EAAQE,KACbC,GAAgBX,EAAKS,UAAU,CAAEF,OAAAA,EAAQI,OAAAA,MAG9CX,EAAKY,WACLJ,EAAUA,EAAQK,MAAOC,IACrB,MAAMd,EAAKY,SAAS,CAAEL,OAAAA,EAAQO,MAAAA,OAG/BN"}