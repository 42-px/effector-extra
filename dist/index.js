import{createEffect as e,createEvent as t,createStore as n,guard as r,sample as a,withFactory as o}from"effector";function i(t){const n=t.domain?t.domain.effect({name:"effect",sid:"-xn2rd6"}):e({name:"effect",sid:"-x614yz"});return n.use(e=>{let n=t.effect(t.mapParams(e),{name:"promise",sid:"-9qez7q"});return t.mapResult&&(n=n.then(n=>t.mapResult({params:e,result:n}))),t.mapError&&(n=n.catch(n=>{throw t.mapError({params:e,error:n})})),n}),n}function m(e,o){const i=t({name:"event",sid:"-qsq21n"}),m=t({name:"pushStore",sid:"-99i15u"}),s=t({name:"resetStore",sid:"-ka34j3"}),c=t({name:"timeoutEnd",sid:"-8qf3eg"}),f=n([],{name:"$storedEvents",sid:"tj0mgu"});let d;return f.on(m,(e,t)=>[...e,t]).reset(s),e.watch(e=>{void 0!==d?(clearTimeout(d),m(e)):i([e]),d=setTimeout(()=>{d=void 0,c()},o)}),r({"ɔ":[{source:a({"ɔ":[f,c,e=>e],config:{name:"source",sid:"4pit6z"}}),filter:f.map(e=>Boolean(e.length))}],config:{sid:"c06kr4"}}).watch(e=>{i(e),s()}),i}const s=()=>new Map,c=()=>new Map;function f({domain:e,effect:t}){return{createMethod:function(n){return o({sid:"7v5c9k",fn:()=>i({domain:e,effect:t,...n}),name:"none",method:"attachWrapper"})}}}export{i as attachWrapper,m as batchEvents,f as createService,s as mockEffects,c as mockStores};
//# sourceMappingURL=index.js.map
