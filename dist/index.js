import{createEffect as e,createEvent as t,createStore as n,guard as r,sample as a,withFactory as o}from"effector";function s(t){const n=t.domain?t.domain.effect({name:"effect",sid:"-xn2rd6"}):e({name:"effect",sid:"-x614yz"});return n.use((e=>{let n=t.effect(t.mapParams(e),{name:"promise",sid:"-9qez7q"});return t.mapResult&&(n=n.then((n=>t.mapResult({params:e,result:n})))),t.mapError&&(n=n.catch((n=>{throw t.mapError({params:e,error:n})}))),n})),n}function m(e,o){const s=t({name:"event",sid:"-qsq21n"}),m=t({name:"pushStore",sid:"-99i15u"}),i=t({name:"resetStore",sid:"-ka34j3"}),c=t({name:"timeoutEnd",sid:"-8qf3eg"}),d=n([],{name:"$storedEvents",sid:"tj0mgu"});let f;return d.on(m,((e,t)=>[...e,t])).reset(i),e.watch((e=>{void 0!==f?(clearTimeout(f),m(e)):s([e]),f=setTimeout((()=>{f=void 0,c()}),o)})),r({and:[{source:a({and:[{source:d,clock:c,fn:e=>e}],or:{name:"source",sid:"4pit6z"}}),filter:d.map((e=>Boolean(e.length)))}],or:{sid:"c06kr4"}}).watch((e=>{s(e),i()})),s}const i=()=>new Map,c=()=>new Map;function d({domain:e,effect:t}){return{createMethod:function(n){return o({sid:"7v5c9k",fn:()=>s({domain:e,effect:t,...n}),name:"none",method:"attachWrapper"})}}}export{s as attachWrapper,m as batchEvents,d as createService,i as mockEffects,c as mockStores};
//# sourceMappingURL=index.js.map
